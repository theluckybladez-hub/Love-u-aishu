<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade">
    <meta name="github" content="https://github.com/Aoudumber-Bade">
    <title>Aishu Birthday</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <style>
        /* Music Prompt Styles */
        #musicPrompt {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff7882, #ff9a9e);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10000;
            animation: bounce 2s infinite, fadeIn 0.5s ease;
            box-shadow: 0 8px 20px rgba(255, 120, 130, 0.4);
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        #musicPrompt:hover {
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 12px 25px rgba(255, 120, 130, 0.6);
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; bottom: 10px; }
            to { opacity: 1; bottom: 30px; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; transform: translateX(-50%) translateY(10px); }
        }

        #musicPrompt i {
            font-size: 1.4rem;
            animation: musicNote 1.5s infinite;
        }

        @keyframes musicNote {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        #musicPrompt span {
            font-size: 1rem;
            letter-spacing: 0.5px;
        }

        /* Welcome Overlay */
        #welcomeOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999999;
            opacity: 1;
            transition: opacity 1s ease;
        }

        .welcome-content {
            text-align: center;
            padding: 50px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
            border: 6px solid #ff7882;
            max-width: 500px;
            width: 90%;
            animation: welcomePulse 2s infinite;
        }

        @keyframes welcomePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .welcome-icon {
            font-size: 70px;
            color: #ff7882;
            margin-bottom: 20px;
            animation: welcomeBounce 1s infinite alternate;
        }

        @keyframes welcomeBounce {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }

        .welcome-text h2 {
            font-family: 'Dancing Script', cursive;
            color: #ff7882;
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .welcome-text p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 25px;
        }

        .click-anywhere {
            background: linear-gradient(to right, #ff7882, #ff9a9e);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 120, 130, 0.3);
        }

        .click-anywhere:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 120, 130, 0.4);
        }
    </style>
</head>

<body>
    <!-- Welcome Overlay (Initially visible, fades after music starts) -->
    <div id="welcomeOverlay">
        <div class="welcome-content">
            <div class="welcome-icon">
                <i class="fas fa-birthday-cake"></i>
            </div>
            <div class="welcome-text">
                <h2>Welcome Aishu! ðŸ’–</h2>
                <p>Your birthday surprise is ready...</p>
                <p style="font-size: 1rem; color: #ff7882; margin-top: 10px;">
                    <i class="fas fa-music"></i> Music will start automatically
                </p>
            </div>
            <button class="click-anywhere" id="startEverything">
                <i class="fas fa-play-circle"></i> Start Celebration
            </button>
        </div>
    </div>

    <!-- Music tag yahi rahega -->
    <audio id="backgroundMusic" loop>
        <source src="birthday-music.mp3" type="audio/mpeg">
        <source src="birthday-music.ogg" type="audio/ogg">
        Your browser does not support the audio element.
    </audio>
    
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">y</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
                <div class="btn">
                    <button id="btn__letter">
                        <div class="mail">
                            Aishu ise open karoðŸ˜š
                            <i class="fa-regular fa-envelope"></i>
                        </div>
                    </button>
                </div>
            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/unnamed.png" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Dear Aishu</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">h</span>
                        <span style="--i: 2;">a</span>
                        <span style="--i: 3;">p</span>
                        <span style="--i: 4;">p</span>
                        <span style="--i: 5;">y</span>
                        <span style="--i: 6;">-</span>
                        <span style="--i: 7;">b</span>
                        <span style="--i: 8;">i</span>
                        <span style="--i: 9;">r</span>
                        <span style="--i: 10;">t</span>
                        <span style="--i: 11;">h</span>
                        <span style="--i: 12;">d</span>
                        <span style="--i: 13;">a</span>
                        <span style="--i: 14;">y</span>
                        <span style="--i: 15;">-</span>
                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>

        <!-- New Memories Button (20 second baad show hoga) -->
        <div class="btn memories-btn" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 1000; opacity: 0;">
            <button id="memoriesBtn" style="display: none;">
                <div class="memories">
                    Aishu ise bhi open karoðŸ¥°
                    <i class="fa-solid fa-heart"></i>
                </div>
            </button>
        </div>

        <div class="boxMail">
            <i class="fa-solid fa-xmark"></i>
            <div class="boxMail-container">
                <div class="card1">
                    <div class="userImg">
                        <img src="images/unnamed.png" alt="">
                    </div>
                    <h4 class="username">To: Aishu ðŸ’–<span class="underline"></span></h4>

                    <h3>Happy Birthday</h3>
                    <div class="imageCute">
                        <img src="cute1.png" alt="">
                    </div>
                </div>
                <div class="card2">
                    <div class="card2-content">
                        <h3></h3>
                        <h2></h2>

                        <div class="imageCute2">
                            <img src="cute2.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
    // MAIN MUSIC SYSTEM - FIXED AUTOMATIC PLAY
    let musicStarted = false;
    const backgroundMusic = document.getElementById('backgroundMusic');
    const welcomeOverlay = document.getElementById('welcomeOverlay');
    const startButton = document.getElementById('startEverything');
    
    // Music storage for pic.html communication
    window.musicState = {
        isPlaying: false,
        currentTime: 0,
        volume: 0.5
    };
    
    // Initialize music system
    function initMusicSystem() {
        if (backgroundMusic) {
            // Set initial volume
            backgroundMusic.volume = 0.5;
            window.musicState.volume = 0.5;
            
            // Try to play immediately (with user gesture simulation)
            setTimeout(() => {
                try {
                    // Create a user gesture simulation
                    const playPromise = backgroundMusic.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            // Success! Music is playing
                            console.log("Music auto-started successfully");
                            musicStarted = true;
                            window.musicState.isPlaying = true;
                            
                            // Hide welcome overlay
                            fadeOutWelcome();
                            
                            // Store music state
                            localStorage.setItem('musicPlaying', 'true');
                        }).catch(error => {
                            console.log("Auto-play was prevented, showing prompt");
                            showMusicPrompt();
                        });
                    }
                } catch (error) {
                    console.log("Music play error:", error);
                    showMusicPrompt();
                }
            }, 1000);
        }
    }
    
    // Show music prompt
    function showMusicPrompt() {
        const musicPrompt = document.createElement('div');
        musicPrompt.id = 'musicPrompt';
        musicPrompt.innerHTML = `
            <i class="fas fa-music"></i>
            <span>Tap anywhere to start music</span>
        `;
        
        musicPrompt.addEventListener('click', startMusicManually);
        document.body.appendChild(musicPrompt);
        
        // Also allow click anywhere on welcome overlay
        welcomeOverlay.addEventListener('click', startMusicManually);
        startButton.addEventListener('click', startMusicManually);
    }
    
    // Hide music prompt
    function hideMusicPrompt() {
        const prompt = document.getElementById('musicPrompt');
        if (prompt) {
            prompt.style.animation = 'fadeOut 0.5s forwards';
            setTimeout(() => {
                if (prompt.parentNode) {
                    prompt.parentNode.removeChild(prompt);
                }
            }, 500);
        }
    }
    
    // Start music manually
    function startMusicManually() {
        if (!musicStarted && backgroundMusic) {
            backgroundMusic.play()
                .then(() => {
                    console.log("Music started manually");
                    musicStarted = true;
                    window.musicState.isPlaying = true;
                    hideMusicPrompt();
                    fadeOutWelcome();
                    
                    localStorage.setItem('musicPlaying', 'true');
                    localStorage.setItem('musicTime', backgroundMusic.currentTime);
                })
                .catch(error => {
                    console.log("Manual play failed:", error);
                });
        }
    }
    
    // Fade out welcome overlay
    function fadeOutWelcome() {
        if (welcomeOverlay) {
            welcomeOverlay.style.opacity = '0';
            setTimeout(() => {
                welcomeOverlay.style.display = 'none';
            }, 1000);
        }
    }
    
    // Initialize music on page load
    window.addEventListener('load', initMusicSystem);
    
    // Also try to play on any user interaction
    document.addEventListener('click', function() {
        if (!musicStarted && backgroundMusic) {
            startMusicManually();
        }
    });
    
    // Track music time for communication with pic.html
    setInterval(() => {
        if (backgroundMusic && musicStarted) {
            window.musicState.currentTime = backgroundMusic.currentTime;
        }
    }, 1000);
    
    // Function to control music volume (for pic.html)
    window.adjustMusicVolume = function(targetVolume, duration = 1000) {
        if (!backgroundMusic) return;
        
        const startVolume = backgroundMusic.volume;
        const change = targetVolume - startVolume;
        const startTime = performance.now();
        
        function updateVolume(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            backgroundMusic.volume = startVolume + (change * progress);
            window.musicState.volume = backgroundMusic.volume;
            
            if (progress < 1) {
                requestAnimationFrame(updateVolume);
            }
        }
        
        requestAnimationFrame(updateVolume);
    };
    
    // Rest of your existing code...
    let datetxt = "10th February";
    let charArrDate = datetxt.split('');
    let currentIndex = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    
    setTimeout(function () {
        timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        }, 100)
    }, 12000)


    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    
    // Greeting card message typing animation
    let titleText = "To You!";
    let cardMessage = "Aishu baby, tumko happy wala birthday! ðŸŽ‰âœ¨\ntumhara birthday tumse jyada mere liye special hai pata nhi maine kab se wait Kiya hai 10th February ka ðŸ¥ºTumhara aana meri zindagi ka sabse khoobsurat tohfa hai. Har din tumhare saath ek nayi kahani, ek nayi khushi milti hai. mai tumhare liye bas yehi chahta hu ki tum hamesha itni hi khush, itni hi masoom raho.Yaha se lekar zindagi ki har manzil tak, mai hamesha tumhare saath hu. Happy Birthday, meri jaan! ðŸŒ¸ðŸŽ‰ðŸ¥°\n\nã…¤ã…¤ã…¤ã…¤ã…¤ã…¤Tumhara AashiqðŸ˜š";
    
    let titleElement = document.querySelector('.card2-content h3');
    let messageElement = document.querySelector('.card2-content h2');
    let typingInterval;
    let titleIndex = 0;
    let messageIndex = 0;
    let hasStarted = false;
    let titleComplete = false;
    
    // Function to start typing animation
    function startTypingAnimation() {
        if (!hasStarted && titleElement && messageElement) {
            hasStarted = true;
            titleElement.innerHTML = '';
            messageElement.innerHTML = '';
            titleIndex = 0;
            messageIndex = 0;
            titleComplete = false;
            
            typingInterval = setInterval(function() {
                // Pehle title type karo (To You!)
                if (!titleComplete) {
                    if (titleIndex < titleText.length) {
                        titleElement.innerHTML += titleText[titleIndex];
                        titleIndex++;
                    } else {
                        titleComplete = true;
                    }
                }
                // Title complete hone ke baad message type karo
                else {
                    if (messageIndex < cardMessage.length) {
                        // Check if we're at the start of an HTML tag
                        if (cardMessage[messageIndex] === '<') {
                            // Find the end of the tag
                            let tagEnd = cardMessage.indexOf('>', messageIndex);
                            if (tagEnd !== -1) {
                                // Add the entire tag at once
                                messageElement.innerHTML += cardMessage.substring(messageIndex, tagEnd + 1);
                                messageIndex = tagEnd + 1;
                            } else {
                                messageElement.innerHTML += cardMessage[messageIndex];
                                messageIndex++;
                            }
                        } else if (cardMessage[messageIndex] === '\n') {
                            messageElement.innerHTML += '<br>';
                            messageIndex++;
                        } else {
                            messageElement.innerHTML += cardMessage[messageIndex];
                            messageIndex++;
                        }
                    } else {
                        clearInterval(typingInterval);
                    }
                }
            }, 50); // 50ms = normal typing speed
        }
    }
    
    // Card open hone par button click
    mailBox.onclick = function () {
        mailBox.classList.toggle('active')
        boxmail.classList.add('active')
        
        // 2 second baad automatic typing start karo
        setTimeout(function() {
            startTypingAnimation();
        }, 2000); // 2 second delay
    }

    close.addEventListener('click', function () {
        boxmail.classList.remove('active')
        
        // Reset everything
        if (typingInterval) {
            clearInterval(typingInterval);
        }
        hasStarted = false;
        titleIndex = 0;
        messageIndex = 0;
        titleComplete = false;
        
        // Clear both title and message
        if (titleElement) {
            titleElement.innerHTML = '';
        }
        if (messageElement) {
            messageElement.innerHTML = '';
        }
    })

    // MEMORIES BUTTON - 20 second baad show hoga
    setTimeout(function() {
        const memoriesBtn = document.getElementById('memoriesBtn');
        const memoriesBtnContainer = document.querySelector('.memories-btn');
        
        if (memoriesBtn) {
            memoriesBtn.style.display = 'block';
            memoriesBtnContainer.style.opacity = '0';
            memoriesBtnContainer.style.animation = 'fadeInButton 1s forwards';
        }
    }, 20000); // 20 seconds

    // Memories button click handler
    document.getElementById('memoriesBtn').addEventListener('click', function() {
        // Save music state before going to pic.html
        if (backgroundMusic && musicStarted) {
            localStorage.setItem('musicTime', backgroundMusic.currentTime);
            localStorage.setItem('musicVolume', backgroundMusic.volume);
            localStorage.setItem('musicPlaying', 'true');
        }
        
        // Smooth transition ke liye
        this.style.transform = 'scale(0.95)';
        this.style.transition = 'transform 0.2s';
        
        // Volume thoda kam karo before leaving
        if (backgroundMusic) {
            window.adjustMusicVolume(0.2, 500);
        }
        
        setTimeout(() => {
            // Smoothly open pic.html
            window.location.href = 'pic.html';
        }, 500);
    });

    // Add fade-in animation for button
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeInButton {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .memories-btn {
            opacity: 0;
        }
        
        #memoriesBtn {
            background: linear-gradient(to right, #FF7882, #ff9a9e);
            outline: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            border: 3px solid var(--color-black);
            font-family: "Sriracha", cursive;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
            box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 12px;
        }
        
        #memoriesBtn:hover {
            transform: translateY(-3px);
            box-shadow: rgba(0, 0, 0, 0.3) 0px 8px 20px;
            background: linear-gradient(to right, #ff4444, #FF7882);
        }
        
        #memoriesBtn:active {
            transform: scale(0.95);
        }
        
        #memoriesBtn i {
            margin-left: 10px;
            animation: heartBeat 1.5s infinite;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        @media screen and (max-width: 658px) {
            #memoriesBtn {
                font-size: 1rem;
                padding: 10px 20px;
            }
            
            .memories-btn {
                bottom: 20px;
            }
        }
    `;
    document.head.appendChild(style);
</script>

</html>