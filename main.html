<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade">
    <meta name="github" content="https://github.com/Aoudumber-Bade">
    <title>Aishu Birthday</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Music tag yahi rahega -->
    <audio id="backgroundMusic" loop>
        <source src="birthday-music.mp3" type="audio/mpeg">
        <source src="birthday-music.ogg" type="audio/ogg">
        Your browser does not support the audio element.
    </audio>
    
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">y</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
                <div class="btn">
                    <button id="btn__letter">
                        <div class="mail">
                            Aishu ise open karoðŸ˜š
                            <i class="fa-regular fa-envelope"></i>
                        </div>
                    </button>
                </div>
            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/unnamed.png" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Dear Aishu</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">h</span>
                        <span style="--i: 2;">a</span>
                        <span style="--i: 3;">p</span>
                        <span style="--i: 4;">p</span>
                        <span style="--i: 5;">y</span>
                        <span style="--i: 6;">-</span>
                        <span style="--i: 7;">b</span>
                        <span style="--i: 8;">i</span>
                        <span style="--i: 9;">r</span>
                        <span style="--i: 10;">t</span>
                        <span style="--i: 11;">h</span>
                        <span style="--i: 12;">d</span>
                        <span style="--i: 13;">a</span>
                        <span style="--i: 14;">y</span>
                        <span style="--i: 15;">-</span>
                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>

        <!-- New Memories Button (20 second baad show hoga) -->
        <div class="btn memories-btn" style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 1000; opacity: 0;">
            <button id="memoriesBtn" style="display: none;">
                <div class="memories">
                    Aishu ise bhi open karoðŸ¥°
                    <i class="fa-solid fa-heart"></i>
                </div>
            </button>
        </div>

        <div class="boxMail">
            <i class="fa-solid fa-xmark"></i>
            <div class="boxMail-container">
                <div class="card1">
                    <div class="userImg">
                        <img src="images/unnamed.png" alt="">
                    </div>
                    <h4 class="username">To: Aishu ðŸ’–<span class="underline"></span></h4>

                    <h3>Happy Birthday</h3>
                    <div class="imageCute">
                        <img src="cute1.png" alt="">
                    </div>
                </div>
                <div class="card2">
                    <div class="card2-content">
                        <h3></h3>
                        <h2></h2>

                        <div class="imageCute2">
                            <img src="cute2.png" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
    // MUSIC FIX: Sabse pahle music setup
    let musicStarted = false;
    const backgroundMusic = document.getElementById('backgroundMusic');
    
    if (backgroundMusic) {
        backgroundMusic.volume = 0.5; // Volume 50%
        
        // Pehla click par music start karo
        function startMusicOnFirstClick() {
            if (!musicStarted) {
                backgroundMusic.play()
                    .then(() => {
                        console.log("Music started successfully");
                        musicStarted = true;
                    })
                    .catch(error => {
                        console.log("Music play error:", error);
                    });
            }
        }
        
        // Kisi bhi click pe music start ho
        document.addEventListener('click', startMusicOnFirstClick);
        
        // Page load hone ke 2 second baad bhi try karo (agar possible ho)
        setTimeout(() => {
            if (!musicStarted) {
                backgroundMusic.play().catch(() => {
                    console.log("Will start on first click");
                });
            }
        }, 2000);
    }

    // Background music control for pic.html
    window.addEventListener('message', function(event) {
        if (event.data && event.data.type === 'fadeMusic') {
            const bgMusic = document.getElementById('backgroundMusic');
            if (bgMusic) {
                fadeAudio(bgMusic, event.data.targetVolume, event.data.duration);
            }
        }
    });

    function fadeAudio(audioElement, targetVolume, duration) {
        const startVolume = audioElement.volume;
        const change = targetVolume - startVolume;
        const startTime = performance.now();
        
        function updateVolume(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            audioElement.volume = startVolume + (change * progress);
            
            if (progress < 1) {
                requestAnimationFrame(updateVolume);
            }
        }
        
        requestAnimationFrame(updateVolume);
    }
    
    // Store reference for pic.html
    localStorage.setItem('bgMusicRef', 'mainPageMusic');

    // BAAKI SAB CODE SAME HAI
    let datetxt = "10th February";
    let charArrDate = datetxt.split('');
    let currentIndex = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    
    setTimeout(function () {
        timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        }, 100)
    }, 12000)


    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    
    // Greeting card message typing animation
    let titleText = "To You!";
    let cardMessage = "Aishu baby, tumko happy wala birthday! ðŸŽ‰âœ¨\ntumhara birthday tumse jyada mere liye special hai pata nhi maine kab se wait Kiya hai 10th February ka ðŸ¥ºTumhara aana meri zindagi ka sabse khoobsurat tohfa hai. Har din tumhare saath ek nayi kahani, ek nayi khushi milti hai. mai tumhare liye bas yehi chahta hu ki tum hamesha itni hi khush, itni hi masoom raho.Yaha se lekar zindagi ki har manzil tak, mai hamesha tumhare saath hu. Happy Birthday, meri jaan! ðŸŒ¸ðŸŽ‰ðŸ¥°\n\nã…¤ã…¤ã…¤ã…¤ã…¤ã…¤Tumhara AashiqðŸ˜š";
    
    let titleElement = document.querySelector('.card2-content h3');
    let messageElement = document.querySelector('.card2-content h2');
    let typingInterval;
    let titleIndex = 0;
    let messageIndex = 0;
    let hasStarted = false;
    let titleComplete = false;
    
    // Function to start typing animation
    function startTypingAnimation() {
        if (!hasStarted && titleElement && messageElement) {
            hasStarted = true;
            titleElement.innerHTML = '';
            messageElement.innerHTML = '';
            titleIndex = 0;
            messageIndex = 0;
            titleComplete = false;
            
            typingInterval = setInterval(function() {
                // Pehle title type karo (To You!)
                if (!titleComplete) {
                    if (titleIndex < titleText.length) {
                        titleElement.innerHTML += titleText[titleIndex];
                        titleIndex++;
                    } else {
                        titleComplete = true;
                    }
                }
                // Title complete hone ke baad message type karo
                else {
                    if (messageIndex < cardMessage.length) {
                        // Check if we're at the start of an HTML tag
                        if (cardMessage[messageIndex] === '<') {
                            // Find the end of the tag
                            let tagEnd = cardMessage.indexOf('>', messageIndex);
                            if (tagEnd !== -1) {
                                // Add the entire tag at once
                                messageElement.innerHTML += cardMessage.substring(messageIndex, tagEnd + 1);
                                messageIndex = tagEnd + 1;
                            } else {
                                messageElement.innerHTML += cardMessage[messageIndex];
                                messageIndex++;
                            }
                        } else if (cardMessage[messageIndex] === '\n') {
                            messageElement.innerHTML += '<br>';
                            messageIndex++;
                        } else {
                            messageElement.innerHTML += cardMessage[messageIndex];
                            messageIndex++;
                        }
                    } else {
                        clearInterval(typingInterval);
                    }
                }
            }, 50); // 50ms = normal typing speed
        }
    }
    
    // Card open hone par button click
    mailBox.onclick = function () {
        mailBox.classList.toggle('active')
        boxmail.classList.add('active')
        
        // 2 second baad automatic typing start karo
        setTimeout(function() {
            startTypingAnimation();
        }, 2000); // 2 second delay
    }

    close.addEventListener('click', function () {
        boxmail.classList.remove('active')
        
        // Reset everything
        if (typingInterval) {
            clearInterval(typingInterval);
        }
        hasStarted = false;
        titleIndex = 0;
        messageIndex = 0;
        titleComplete = false;
        
        // Clear both title and message
        if (titleElement) {
            titleElement.innerHTML = '';
        }
        if (messageElement) {
            messageElement.innerHTML = '';
        }
    })

    // MEMORIES BUTTON - 20 second baad show hoga
    setTimeout(function() {
        const memoriesBtn = document.getElementById('memoriesBtn');
        const memoriesBtnContainer = document.querySelector('.memories-btn');
        
        if (memoriesBtn) {
            memoriesBtn.style.display = 'block';
            memoriesBtnContainer.style.opacity = '0';
            memoriesBtnContainer.style.animation = 'fadeInButton 1s forwards';
        }
    }, 20000); // 20 seconds

    // Memories button click handler
    document.getElementById('memoriesBtn').addEventListener('click', function() {
        // Smooth transition ke liye
        this.style.transform = 'scale(0.95)';
        this.style.transition = 'transform 0.2s';
        
        setTimeout(() => {
            // Smoothly open pic.html
            window.location.href = 'pic.html';
        }, 300);
    });

    // Add fade-in animation for button
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeInButton {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .memories-btn {
            opacity: 0;
        }
        
        #memoriesBtn {
            background: linear-gradient(to right, #FF7882, #ff9a9e);
            outline: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            border: 3px solid var(--color-black);
            font-family: "Sriracha", cursive;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
            box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 12px;
        }
        
        #memoriesBtn:hover {
            transform: translateY(-3px);
            box-shadow: rgba(0, 0, 0, 0.3) 0px 8px 20px;
            background: linear-gradient(to right, #ff4444, #FF7882);
        }
        
        #memoriesBtn:active {
            transform: scale(0.95);
        }
        
        #memoriesBtn i {
            margin-left: 10px;
            animation: heartBeat 1.5s infinite;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        @media screen and (max-width: 658px) {
            #memoriesBtn {
                font-size: 1rem;
                padding: 10px 20px;
            }
            
            .memories-btn {
                bottom: 20px;
            }
        }
    `;
    document.head.appendChild(style);
</script>

</html>
