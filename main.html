<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade">
    <meta name="github" content="https://github.com/Aoudumber-Bade">
    <title>Aishu Birthday</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;700&family=Poppins:wght@400;600&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <style>
        /* REMOVE BLUE HIGHLIGHT EFFECT FROM ALL BUTTONS AND INPUTS */
        * {
            outline: none !important;
            -webkit-tap-highlight-color: transparent !important;
        }
        
        button:focus,
        input:focus,
        a:focus,
        select:focus,
        textarea:focus {
            outline: none !important;
            box-shadow: none !important;
        }

        /* Music Prompt Styles */
        #musicPrompt {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff7882, #ff9a9e);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 10000;
            animation: bounce 2s infinite, fadeIn 0.5s ease;
            box-shadow: 0 8px 20px rgba(255, 120, 130, 0.4);
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        #musicPrompt:hover {
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 12px 25px rgba(255, 120, 130, 0.6);
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; bottom: 10px; }
            to { opacity: 1; bottom: 30px; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; transform: translateX(-50%) translateY(10px); }
        }

        #musicPrompt i {
            font-size: 1.4rem;
            animation: musicNote 1.5s infinite;
        }

        @keyframes musicNote {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        #musicPrompt span {
            font-size: 1rem;
            letter-spacing: 0.5px;
        }

        /* Welcome Overlay */
        #welcomeOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999999;
            opacity: 1;
            transition: opacity 1s ease;
        }

        .welcome-content {
            text-align: center;
            padding: 50px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.25);
            border: 6px solid #ff7882;
            max-width: 500px;
            width: 90%;
            animation: welcomePulse 2s infinite;
        }

        @keyframes welcomePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .welcome-icon {
            font-size: 70px;
            color: #ff7882;
            margin-bottom: 20px;
            animation: welcomeBounce 1s infinite alternate;
        }

        @keyframes welcomeBounce {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }

        .welcome-text h2 {
            font-family: 'Dancing Script', cursive;
            color: #ff7882;
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .welcome-text p {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 25px;
        }

        .click-anywhere {
            background: linear-gradient(to right, #ff7882, #ff9a9e);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(255, 120, 130, 0.3);
        }

        .click-anywhere:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 120, 130, 0.4);
        }

        /* MEMORIES PAGE STYLES */
        .memories-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #fff5f7 0%, #ffeef2 100%);
            z-index: 99999;
            overflow-y: auto;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .memories-page.active {
            display: block;
            opacity: 1;
        }

        .memories-page::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 182, 193, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 105, 180, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        /* Back Button */
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: linear-gradient(135deg, #ff6b93, #ff85a2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(255, 107, 147, 0.3);
            transition: all 0.3s ease;
            z-index: 100000;
        }

        .back-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 147, 0.4);
        }

        .back-button:active {
            transform: translateY(-1px);
        }

        /* Header */
        .mem-header {
            text-align: center;
            padding: 80px 20px 30px;
            position: relative;
            animation: fadeInUp 0.8s ease forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mem-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: linear-gradient(to right, transparent, #ff85a2, transparent);
            border-radius: 2px;
        }

        .mem-header h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3.2rem;
            color: #ff6b93;
            margin-bottom: 10px;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.05);
        }

        .mem-header p {
            font-size: 1.1rem;
            color: #8a6b8d;
            max-width: 600px;
            margin: 0 auto;
            font-weight: 300;
        }

        /* Memories Container */
        .memories-container {
            max-width: 900px;
            margin: 0 auto 50px;
            padding: 0 20px;
        }

        /* Memory Item */
        .memory-item {
            background: rgba(255, 255, 255, 0.92);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(255, 107, 147, 0.1);
            border: 2px solid rgba(255, 182, 193, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
        }

        .memory-item.visible {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .memory-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(255, 107, 147, 0.15);
            border-color: rgba(255, 107, 147, 0.5);
        }

        .memory-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(to bottom, #ff6b93, #ffb6c1);
            border-radius: 3px 0 0 3px;
        }

        /* Photo Frame */
        .photo-frame {
            width: 100%;
            min-height: 200px;
            max-height: 600px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 8px solid white;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f8f8;
            padding: 15px;
        }

        .photo-frame img {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            transition: transform 0.5s ease;
            display: block;
            border-radius: 8px;
        }

        .photo-frame img.loading {
            filter: blur(5px);
            opacity: 0.7;
        }

        .photo-frame img.loaded {
            filter: blur(0);
            opacity: 1;
            transition: filter 0.5s ease, opacity 0.5s ease;
        }

        .memory-item:hover .photo-frame img {
            transform: scale(1.03);
        }

        .photo-number {
            position: absolute;
            top: -15px;
            right: -15px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ff6b93, #ff85a2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(255, 107, 147, 0.3);
            z-index: 2;
        }

        /* Memory Note */
        .memory-note {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .memory-note.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .memory-note p {
            font-size: 1.1rem;
            color: #5a3d5c;
            line-height: 1.8;
            padding: 15px 20px;
            background: linear-gradient(to right, rgba(255, 182, 193, 0.1), rgba(255, 235, 242, 0.2));
            border-left: 4px solid #ff6b93;
            border-radius: 0 12px 12px 0;
            font-weight: 400;
        }

        .memory-note i {
            color: #ff6b93;
            font-size: 0.9rem;
            margin: 0 5px;
        }

        /* Voice Note Section */
        .voice-note-section {
            background: linear-gradient(135deg, #ffffff 0%, #fff0f5 100%);
            border-radius: 25px;
            padding: 40px;
            margin: 50px auto;
            max-width: 800px;
            box-shadow: 0 15px 40px rgba(255, 107, 147, 0.15);
            border: 3px solid rgba(255, 182, 193, 0.4);
            position: relative;
            overflow: hidden;
        }

        .voice-note-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 182, 193, 0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .voice-note-section h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: #ff6b93;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .voice-player {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            position: relative;
            z-index: 1;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .play-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b93, #ff85a2);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 147, 0.3);
            flex-shrink: 0;
        }

        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 107, 147, 0.4);
        }

        .play-button:active {
            transform: scale(0.95);
        }

        .play-button.playing {
            background: linear-gradient(135deg, #ff4d6d, #ff6b93);
        }

        .progress-info {
            flex-grow: 1;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 107, 147, 0.1);
            border-radius: 10px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #ff6b93, #ff85a2);
            border-radius: 10px;
            width: 0%;
            transition: width 0.1s ease;
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(255, 107, 147, 0.4);
        }

        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #8a6b8d;
            font-weight: 500;
        }

        .voice-message {
            text-align: center;
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(to right, rgba(255, 182, 193, 0.1), rgba(255, 235, 242, 0.2));
            border-radius: 15px;
            border-left: 4px solid #ff6b93;
        }

        .voice-message p {
            color: #5a3d5c;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .voice-message i {
            color: #ff6b93;
            margin: 0 5px;
        }

        /* Loading Screen for Memories */
        .mem-loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #fff5f7 0%, #ffeef2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100001;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .mem-loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .mem-loader {
            width: 50px;
            height: 50px;
            border: 5px solid #ff6b93;
            border-bottom-color: transparent;
            border-radius: 50%;
            animation: rotation 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .mem-loading-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: #ff6b93;
            text-align: center;
        }

        /* Responsive */
        @media screen and (max-width: 768px) {
            .mem-header h1 {
                font-size: 2.5rem;
            }
            
            .memory-item {
                padding: 20px;
            }
            
            .voice-note-section {
                padding: 30px 20px;
            }
            
            .back-button {
                top: 15px;
                left: 15px;
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>

<body>
    <!-- Welcome Overlay (Initially visible, fades after music starts) -->
    <div id="welcomeOverlay">
        <div class="welcome-content">
            <div class="welcome-icon">
                <i class="fas fa-birthday-cake"></i>
            </div>
            <div class="welcome-text">
                <h2>Welcome Aishu! ðŸ’–</h2>
                <p>Your birthday surprise is ready...</p>
                <p style="font-size: 1rem; color: #ff7882; margin-top: 10px;">
                    <i class="fas fa-music"></i> Music will start automatically
                </p>
            </div>
            <button class="click-anywhere" id="startEverything">
                <i class="fas fa-play-circle"></i> Start Celebration
            </button>
        </div>
    </div>

    <!-- Music tag yahi rahega -->
    <audio id="backgroundMusic" loop>
        <source src="birthday-music.mp3" type="audio/mpeg">
        <source src="birthday-music.ogg" type="audio/ogg">
        Your browser does not support the audio element.
    </audio>
    
    <!-- MAIN BIRTHDAY PAGE -->
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">y</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
                <div class="btn">
                    <button id="btn__letter">
                        <div class="mail">
                            Aishu ise open karoðŸ˜š
                            <i class="fa-regular fa-envelope"></i>
                        </div>
                    </button>
                </div>
            </div>
            <div class="right">
                <div class="balloon__container">
                    <div class="balloon">
                        <img src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon2.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon2.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon2.png" alt="">
                    </div>
                    <div class="balloon">
                        <img src="./images/balloon1.png" alt="">
                    </div>
                </div>
            </div>
        </div>
        <div class="boxMail">
            <div class="decoration">
                <img src="./images/decorate_flower.png" class="decorate1" alt="">
                <img src="./images/decorate_flower.png" class="decorate2" alt="">
                <img src="./images/decorate_flower.png" class="decorate3" alt="">
                <img src="./images/decorate_flower.png" class="decorate4" alt="">
                <img src="./images/decorate_flower.png" class="decorate5" alt="">
                <img src="./images/decorate_flower.png" class="decorate6" alt="">
                <img src="./images/decorate_flower.png" class="decorate7" alt="">
                <img src="./images/decorate_flower.png" class="decorate8" alt="">
            </div>
            <div class="heart__left">
                <img src="./images/love.png" alt="">
            </div>
            <div class="heart__right">
                <img src="./images/love.png" alt="">
            </div>
            <div class="smiley__background">
                <img src="./images/smiley_icon.png" alt="">
            </div>
            <div class="card1" id="card1">
                <div class="card1-content">
                    <i class="fa-solid fa-xmark"></i>
                    <div class="back__card">
                        <img src="./images/heart_letter.png" alt="">
                    </div>
                </div>
            </div>
            <div class="card2" id="card2">
                <div class="card2-content">
                    <h3></h3>
                    <h2></h2>
                </div>
            </div>
        </div>
        
        <!-- MEMORIES BUTTON (appears after 20 seconds) -->
        <div class="memories-btn" style="position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 10001;">
            <button id="memoriesBtn" style="display: none;">
                View Our Memories <i class="fas fa-images"></i>
            </button>
        </div>
    </div>

    <!-- MEMORIES PAGE (Hidden initially) -->
    <div class="memories-page" id="memoriesPage">
        <!-- Loading Screen -->
        <div class="mem-loading-screen" id="memLoadingScreen">
            <div class="mem-loader"></div>
            <div class="mem-loading-text">Loading precious memories...</div>
        </div>

        <!-- Back Button -->
        <button class="back-button" id="backButton">
            <i class="fas fa-arrow-left"></i> Back to Birthday
        </button>

        <!-- Header -->
        <div class="mem-header">
            <h1>Our Beautiful Memories ðŸ’•</h1>
            <p>Every moment with you is a treasure I'll cherish forever</p>
        </div>

        <!-- Memories Container -->
        <div class="memories-container" id="memoriesContainer">
            <!-- Memories will be loaded here dynamically -->
        </div>

        <!-- Voice Note Section -->
        <div class="voice-note-section">
            <h2>A Special Message For You ðŸ’–</h2>
            <div class="voice-player">
                <audio id="voiceNote">
                    <source src="voice-note.mp3" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>

                <div class="player-controls">
                    <button class="play-button" id="playBtn">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="progress-info">
                        <div class="progress-container" id="progressContainer">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        <div class="time-info">
                            <span id="currentTime">00:00</span>
                            <span id="durationTime">00:00</span>
                        </div>
                    </div>
                </div>

                <div class="voice-message">
                    <p><i class="fas fa-heart"></i> Tumhare liye ek special message hai... Press play to listen! <i class="fas fa-heart"></i></p>
                </div>
            </div>
        </div>
    </div>

<script>
    // Music Management
    let backgroundMusic = document.getElementById('backgroundMusic');
    let musicStarted = false;
    let currentMusicVolume = 0.5;

    // Smooth volume transition function
    window.adjustMusicVolume = function(targetVolume, duration = 1000) {
        if (!backgroundMusic) return;
        
        const startVolume = backgroundMusic.volume;
        const volumeDiff = targetVolume - startVolume;
        const startTime = Date.now();
        
        function updateVolume() {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            backgroundMusic.volume = startVolume + (volumeDiff * progress);
            currentMusicVolume = backgroundMusic.volume;
            
            if (progress < 1) {
                requestAnimationFrame(updateVolume);
            }
        }
        
        updateVolume();
    };

    // Start Everything Button
    document.getElementById('startEverything').addEventListener('click', function() {
        // Start music
        backgroundMusic.volume = 0.5;
        backgroundMusic.play().then(() => {
            musicStarted = true;
            console.log('Music started successfully');
        }).catch(e => {
            console.log('Music autoplay failed:', e);
        });
        
        // Hide welcome overlay
        const overlay = document.getElementById('welcomeOverlay');
        overlay.style.opacity = '0';
        setTimeout(() => {
            overlay.style.display = 'none';
        }, 1000);
    });

    // Balloons animation and other scripts
    let imgBalloon = document.querySelectorAll('.balloon__container .balloon');
    for (let i = 0; i < imgBalloon.length; i++) {
        imgBalloon[i].style.setProperty('--i', i + 1);
        imgBalloon[i].style.setProperty('--j', Math.random() * 2);
    }
    
    // Rest of your existing code...
    let datetxt = "10th February";
    let charArrDate = datetxt.split('');
    let currentIndex = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    
    setTimeout(function () {
        timeDatetxt = setInterval(function () {
            if (currentIndex < charArrDate.length) {
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else {
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        }, 100)
    }, 12000)


    let mailBox = document.querySelector('.mail')
    let boxmail = document.querySelector('.boxMail')
    var close = document.querySelector('.fa-xmark')
    
    // Greeting card message typing animation
    let titleText = "To You!";
    let cardMessage = "Aishu baby, tumko happy wala birthday! ðŸŽ‰âœ¨\ntumhara birthday tumse jyada mere liye special hai pata nhi maine kab se wait Kiya hai 10th February ka ðŸ¥ºTumhara aana meri zindagi ka sabse khoobsurat tohfa hai. Har din tumhare saath ek nayi kahani, ek nayi khushi milti hai. mai tumhare liye bas yehi chahta hu ki tum hamesha itni hi khush, itni hi masoom raho.Yaha se lekar zindagi ki har manzil tak, mai hamesha tumhare saath hu. Happy Birthday, meri jaan! ðŸŒ¸ðŸŽ‰ðŸ¥°\n\nã…¤ã…¤ã…¤ã…¤ã…¤ã…¤Tumhara AashiqðŸ˜š";
    
    let titleElement = document.querySelector('.card2-content h3');
    let messageElement = document.querySelector('.card2-content h2');
    let typingInterval;
    let titleIndex = 0;
    let messageIndex = 0;
    let hasStarted = false;
    let titleComplete = false;
    
    // Function to start typing animation
    function startTypingAnimation() {
        if (!hasStarted && titleElement && messageElement) {
            hasStarted = true;
            titleElement.innerHTML = '';
            messageElement.innerHTML = '';
            titleIndex = 0;
            messageIndex = 0;
            titleComplete = false;
            
            typingInterval = setInterval(function() {
                // Pehle title type karo (To You!)
                if (!titleComplete) {
                    if (titleIndex < titleText.length) {
                        titleElement.innerHTML += titleText[titleIndex];
                        titleIndex++;
                    } else {
                        titleComplete = true;
                    }
                }
                // Title complete hone ke baad message type karo
                else {
                    if (messageIndex < cardMessage.length) {
                        // Check if we're at the start of an HTML tag
                        if (cardMessage[messageIndex] === '<') {
                            // Find the end of the tag
                            let tagEnd = cardMessage.indexOf('>', messageIndex);
                            if (tagEnd !== -1) {
                                // Add the entire tag at once
                                messageElement.innerHTML += cardMessage.substring(messageIndex, tagEnd + 1);
                                messageIndex = tagEnd + 1;
                            } else {
                                messageElement.innerHTML += cardMessage[messageIndex];
                                messageIndex++;
                            }
                        } else if (cardMessage[messageIndex] === '\n') {
                            messageElement.innerHTML += '<br>';
                            messageIndex++;
                        } else {
                            messageElement.innerHTML += cardMessage[messageIndex];
                            messageIndex++;
                        }
                    } else {
                        clearInterval(typingInterval);
                    }
                }
            }, 50); // 50ms = normal typing speed
        }
    }
    
    // Card open hone par button click
    mailBox.onclick = function () {
        mailBox.classList.toggle('active')
        boxmail.classList.add('active')
        
        // 2 second baad automatic typing start karo
        setTimeout(function() {
            startTypingAnimation();
        }, 2000); // 2 second delay
    }

    close.addEventListener('click', function () {
        boxmail.classList.remove('active')
        
        // Reset everything
        if (typingInterval) {
            clearInterval(typingInterval);
        }
        hasStarted = false;
        titleIndex = 0;
        messageIndex = 0;
        titleComplete = false;
        
        // Clear both title and message
        if (titleElement) {
            titleElement.innerHTML = '';
        }
        if (messageElement) {
            messageElement.innerHTML = '';
        }
    })

    // MEMORIES BUTTON - 20 second baad show hoga
    setTimeout(function() {
        const memoriesBtn = document.getElementById('memoriesBtn');
        const memoriesBtnContainer = document.querySelector('.memories-btn');
        
        if (memoriesBtn) {
            memoriesBtn.style.display = 'block';
            memoriesBtnContainer.style.opacity = '0';
            memoriesBtnContainer.style.animation = 'fadeInButton 1s forwards';
        }
    }, 20000); // 20 seconds

    // Memories button click handler - ab page change nahi hoga
    document.getElementById('memoriesBtn').addEventListener('click', function() {
        // Hide birthday page
        document.getElementById('wrapper').style.display = 'none';
        
        // Show memories page
        const memoriesPage = document.getElementById('memoriesPage');
        memoriesPage.classList.add('active');
        
        // Load memories
        loadMemories();
        
        // Music volume thoda kam karo
        if (backgroundMusic && musicStarted) {
            window.adjustMusicVolume(0.3, 500);
        }
    });

    // Back button handler
    document.getElementById('backButton').addEventListener('click', function() {
        // Hide memories page
        const memoriesPage = document.getElementById('memoriesPage');
        memoriesPage.classList.remove('active');
        
        // Show birthday page again
        document.getElementById('wrapper').style.display = 'block';
        
        // Music volume wapas normal karo
        if (backgroundMusic && musicStarted) {
            window.adjustMusicVolume(0.5, 500);
        }
        
        // Stop voice note if playing
        const voiceNote = document.getElementById('voiceNote');
        if (voiceNote && !voiceNote.paused) {
            voiceNote.pause();
            voiceNote.currentTime = 0;
            document.getElementById('playBtn').innerHTML = '<i class="fas fa-play"></i>';
            document.getElementById('playBtn').classList.remove('playing');
        }
    });

    // MEMORIES PAGE FUNCTIONALITY
    function loadMemories() {
        const container = document.getElementById('memoriesContainer');
        const loadingScreen = document.getElementById('memLoadingScreen');
        
        // Clear container
        container.innerHTML = '';
        
        // Show loading
        loadingScreen.classList.remove('hidden');
        
        // Memories data
        const memories = [
            {
                image: 'pics/memory1.jpg',
                note: 'Pehli baar tumhe dekha tha... dil ne kaha, bas yahi hai! ðŸ’•'
            },
            {
                image: 'pics/memory2.jpg',
                note: 'Tumhari har smile mere dil ko sukoon deti hai! ðŸ˜Šâœ¨'
            },
            {
                image: 'pics/memory3.jpg',
                note: 'Har moment tumhare saath ek khoobsurat yaad hai! ðŸŒ¸'
            },
            {
                image: 'pics/memory4.jpg',
                note: 'Tumhare bina zindagi adhoori hai baby! ðŸ¥ºðŸ’–'
            },
            {
                image: 'pics/memory5.jpg',
                note: 'Hamesha tumhare saath rahunaa chahta hu... forever! ðŸ’‘'
            }
        ];
        
        let loadedImagesCount = 0;
        const totalImages = memories.length;
        
        // Load each memory
        memories.forEach((memory, index) => {
            const memoryItem = document.createElement('div');
            memoryItem.className = 'memory-item';
            
            // Create image element
            const img = document.createElement('img');
            img.classList.add('loading');
            
            img.onload = function() {
                img.classList.remove('loading');
                img.classList.add('loaded');
                loadedImagesCount++;
                
                updateLoadingProgress();
                
                setTimeout(() => {
                    memoryItem.classList.add('visible');
                    
                    const noteElement = memoryItem.querySelector('.memory-note');
                    setTimeout(() => {
                        noteElement.classList.add('visible');
                    }, 300);
                }, 100);
                
                img.alt = `Memory ${index + 1}`;
                img.style.maxWidth = '100%';
                img.style.maxHeight = '100%';
                img.style.objectFit = 'contain';
            };
            
            img.onerror = function() {
                console.log(`Image ${memory.image} failed to load`);
                loadedImagesCount++;
                updateLoadingProgress();
                
                setTimeout(() => {
                    memoryItem.classList.add('visible');
                    const noteElement = memoryItem.querySelector('.memory-note');
                    setTimeout(() => {
                        noteElement.classList.add('visible');
                    }, 300);
                }, 100);
            };
            
            setTimeout(() => {
                if (!memoryItem.classList.contains('visible')) {
                    memoryItem.classList.add('visible');
                    const noteElement = memoryItem.querySelector('.memory-note');
                    setTimeout(() => {
                        noteElement.classList.add('visible');
                    }, 300);
                }
            }, 3000);
            
            img.src = memory.image;
            
            memoryItem.innerHTML = `
                <div class="photo-number">${index + 1}</div>
                <div class="photo-frame">
                    <!-- Image will be inserted here -->
                </div>
                <div class="memory-note">
                    <p><i class="fas fa-heart"></i> ${memory.note} <i class="fas fa-heart"></i></p>
                </div>
            `;
            
            const photoFrame = memoryItem.querySelector('.photo-frame');
            photoFrame.appendChild(img);
            
            container.appendChild(memoryItem);
        });
        
        function updateLoadingProgress() {
            if (loadedImagesCount >= totalImages) {
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }, 500);
            }
        }
    }

    // Voice Note Player
    const voiceNote = document.getElementById('voiceNote');
    const playBtn = document.getElementById('playBtn');
    const currentTimeDisplay = document.getElementById('currentTime');
    const durationTimeDisplay = document.getElementById('durationTime');
    const progressBar = document.getElementById('progressBar');
    const progressContainer = document.getElementById('progressContainer');

    let isPlaying = false;

    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function updateProgress() {
        if (voiceNote.duration) {
            const progress = (voiceNote.currentTime / voiceNote.duration) * 100;
            progressBar.style.width = `${progress}%`;
            
            currentTimeDisplay.textContent = formatTime(voiceNote.currentTime);
            durationTimeDisplay.textContent = formatTime(voiceNote.duration);
        }
    }

    function setProgress(e) {
        const width = this.clientWidth;
        const clickX = e.offsetX;
        const duration = voiceNote.duration;
        
        if (duration) {
            voiceNote.currentTime = (clickX / width) * duration;
        }
    }

    // Initialize voice note player
    voiceNote.volume = 1.0;
    
    voiceNote.addEventListener('loadedmetadata', function() {
        durationTimeDisplay.textContent = formatTime(voiceNote.duration);
    });
    
    voiceNote.addEventListener('timeupdate', updateProgress);
    
    playBtn.addEventListener('click', function() {
        if (!isPlaying) {
            // Background music volume kam karo
            if (backgroundMusic && musicStarted) {
                window.adjustMusicVolume(0, 800);
            }
            
            voiceNote.play().then(() => {
                isPlaying = true;
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                playBtn.classList.add('playing');
            }).catch(e => {
                console.log("Play failed:", e);
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
                playBtn.classList.remove('playing');
            });
        } else {
            voiceNote.pause();
            isPlaying = false;
            playBtn.innerHTML = '<i class="fas fa-play"></i>';
            playBtn.classList.remove('playing');
            
            // Background music volume wapas normal karo
            if (backgroundMusic && musicStarted) {
                window.adjustMusicVolume(0.3, 1000);
            }
        }
    });
    
    voiceNote.addEventListener('ended', function() {
        isPlaying = false;
        playBtn.innerHTML = '<i class="fas fa-play"></i>';
        playBtn.classList.remove('playing');
        
        // Background music volume wapas normal karo
        setTimeout(() => {
            if (backgroundMusic && musicStarted) {
                window.adjustMusicVolume(0.3, 1500);
            }
        }, 500);
    });
    
    progressContainer.addEventListener('click', setProgress);

    // Add fade-in animation for button
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeInButton {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .memories-btn {
            opacity: 0;
        }
        
        #memoriesBtn {
            background: linear-gradient(to right, #FF7882, #ff9a9e);
            outline: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            border-radius: 50px;
            border: 3px solid var(--color-black);
            font-family: "Sriracha", cursive;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
            box-shadow: rgba(0, 0, 0, 0.2) 0px 4px 12px;
        }
        
        #memoriesBtn:hover {
            transform: translateY(-3px);
            box-shadow: rgba(0, 0, 0, 0.3) 0px 8px 20px;
            background: linear-gradient(to right, #ff4444, #FF7882);
        }
        
        #memoriesBtn:active {
            transform: scale(0.95);
        }
        
        #memoriesBtn i {
            margin-left: 10px;
            animation: heartBeat 1.5s infinite;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        @media screen and (max-width: 658px) {
            #memoriesBtn {
                font-size: 1rem;
                padding: 10px 20px;
            }
            
            .memories-btn {
                bottom: 20px;
            }
        }
    `;
    document.head.appendChild(style);
</script>

</html>
